---
description: Tools and technical specs for the repo
globs: 
alwaysApply: false
---
## Overview

Map Painter .io is a real-time multiplayer map game template built with Next.js 15 and React 19. The design prioritizes testability, maintainability, and extensibility. The project leverages modern tools and practices (including heavy AI-assisted development) to create a cutting-edge, scalable game platform.

## Technology Stack

- **Framework**: Next.js 15 (using the app router for full-stack capabilities)
- **Language**: TypeScript 5.4+ (modern features like `satisfies`)
- **Frontend**:
  - **React**: React 19 (concurrent rendering, new hooks like `useTransition`)
  - **Rendering**: PixiJS 8.x (modern 2D graphics library with WebGPU support)
  - **State Management**: Redux Toolkit 2.x + RTK Query
  - **Component Library**: Shadcn/ui (unstyled, Tailwind-based components)
- **Backend**:
  - **WebSocket**: `ws` integrated with a custom Next.js server
  - **Data Storage**: Vercel KV (in-memory speed with Redis compatibility)
- **Styling**: Tailwind CSS 3.4+
- **Testing**:
  - **Unit**: Vitest
  - **E2E**: Playwright
- **Tooling**:
  - **Linting**: ESLint 9.x (flat config)
  - **Formatting**: Prettier 3.x
  - **CI/CD**: GitHub Actions with Husky and lint-staged for pre-commit hooks

### Modern Choices Rationale

- **Vitest**: Optimized for speed with modern ESM support.
- **Playwright**: Superior cross-browser and WebSocket testing.
- **Vercel KV**: Scalable, serverless key-value storage that simplifies Redis integration.
- **ws**: A lightweight WebSocket library that works seamlessly with Next.js.
- **ESLint 9.x**: Offers a simpler, flat configuration for maintainability.

## Repository Structure

```
map-painter-io/
├── src/
│   ├── app/                  # Next.js app router and game routes
│   ├── components/           # Reusable UI & game-specific components
│   ├── config/              # Game rules and map loader configuration
│   ├── lib/                 # Utility functions and core game logic
│   ├── server/              # Server-side logic (game instances, WebSocket server, storage adapter)
│   ├── store/               # Redux Toolkit slices and RTK Query API
│   ├── types/               # Shared TypeScript types
│   ├── public/              # Static assets (GeoJSON maps)
│   └── tests/               # Unit and integration tests
├── e2e/                     # Playwright end-to-end tests
├── .github/                 # CI/CD workflows (GitHub Actions)
├── .husky/                  # Pre-commit hooks configuration
├── Config files             # ESLint, Prettier, Next.js, Tailwind, Vitest, etc.
└── README.md                # Project guide and high-level documentation
```
